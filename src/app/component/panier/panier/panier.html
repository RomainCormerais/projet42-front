<div class="container py-5">
  <h2 class="mb-4 fw-bold">Mon Panier</h2>

  @if (lignes().length === 0) {
  <div class="alert alert-info text-center py-4">
    Votre panier est vide…
    <br />
    <a routerLink="/catalogue" class="btn btn-info mt-3">
      Découvrir les jeux <i class="fas fa-angle-right"></i></a>
  </div>
  } 
  @for (lc of lignes(); track lc.jeu.id_jeu) {
  <div class="cart-item d-flex align-items-center p-3 mb-3 shadow-sm rounded">
    <img [src]="'images/' + lc.jeu.image" alt="jeu" class="cart-img rounded" />

    <div class="ms-3 flex-grow-1">
      <h5 class="mb-1 fw-bold">{{ lc.jeu.nom_jeu }}</h5>

      <p class="text-muted small mb-1">
        {{ lc.jeu.description_jeu }}
      </p>

      <div class="fw-semibold">{{ lc.jeu.prix }} €</div>
    </div>

    <div class="d-flex align-items-center">
      <button class="quantite-btn btn-light" (click)="retraitPanier(lc.jeu.id_jeu!)">
        <i class="fa-solid fa-minus"></i>
      </button>
      <span class="quantite-value">
        {{ lc.quantite }}
      </span>
      <button class="quantite-btn btn-light" [disabled]="addDisable(lc)" (click)="ajoutPanier(lc)">
        <i class="fa-solid fa-plus"></i>
      </button>
    </div>

    <button class="btn btn-danger ms-3" (click)="retirerDuPanier(lc.jeu.id_jeu!)">
      <i class="fa-solid fa-trash"></i>
    </button>
  </div>
  }
  <div class="cart-total-box shadow-sm p-4 rounded mt-4">
    @if (lignes().length > 0) {
    <h4 class="fw-bold mb-3">Total : {{ totalPanier() }} €</h4>

    <button class="btn btn-success w-100 mb-3 py-2" (click)="startFireworks()">
      Procéder au paiement <i class="fas fa-angle-right"></i>
    </button>
    @if(logged != ''){
    <button class="btn btn-outline-primary w-100 mb-2" (click)="sauvegardePanier()">
      Sauvegarder le panier en ligne
    </button>
    } } @if(logged != ''){
    <button class="btn btn-outline-secondary w-100" (click)="chargerPanier()">
      <i class="fas fa-cloud-upload-alt"></i> Charger le panier en ligne
    </button>
    }
  </div>
  
  <div style="position: relative;">
    <div #container class="fireworks-container"></div>
  </div>
</div>